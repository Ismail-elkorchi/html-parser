{
  "version": 1,
  "profiles": {
    "ci": {
      "requireHoldouts": false,
      "requireBrowserDiff": false,
      "requireDeno": true,
      "requireBun": true,
      "requireBrowserSmoke": false,
      "requireFuzzReport": false,
      "requireStreamReport": true
    },
    "release": {
      "requireHoldouts": true,
      "requireBrowserDiff": true,
      "requireDeno": true,
      "requireBun": true,
      "requireBrowserSmoke": false,
      "requireFuzzReport": true,
      "requireStreamReport": true
    }
  },
  "thresholds": {
    "conformance": {
      "tokenizer": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "tree": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "encoding": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "serializer": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "holdout": {
        "minPassRate": 1,
        "maxSkips": 0
      }
    },
    "browserDiff": {
      "minAgreement": 0.999,
      "minEnginesPresent": 3,
      "minCases": 500,
      "minTagCoverage": 10,
      "requiredTags": [
        "tokenizer/entities",
        "adoption-agency",
        "tables/foster-parenting",
        "foreign-content (svg/mathml)",
        "templates",
        "optional-tags",
        "comments/doctype",
        "scripting-flag surface (document.write-like markup patterns as strings only)"
      ]
    },
    "determinism": {
      "requireNode": true
    },
    "budgets": {
      "requireBudgetsReport": true,
      "requireNoHangs": true,
      "requireStructuredBudgetErrors": true,
      "requireFuzzReport": true
    },
    "packaging": {
      "forbiddenPaths": [
        "vendor/",
        "test/",
        "codex-prompts/",
        "scripts/"
      ]
    }
  },
  "weights": {
    "correctness": 40,
    "browserDiff": 20,
    "performance": 15,
    "robustness": 10,
    "agentFirst": 10,
    "packagingTrust": 5
  },
  "performanceBaseline": {
    "notes": "Set after stable reference build on your hardware/CI.",
    "benchmarks": {
      "parse-medium": {
        "mbPerSec": 50,
        "memoryMB": 150
      },
      "parse-large": {
        "mbPerSec": 50,
        "memoryMB": 150
      }
    }
  },
  "scoring": {
    "passRateScoreShape": "fromThresholdToPerfect",
    "browserAgreementAggregation": "min",
    "performanceAggregation": "geometricMean"
  }
}
