{
  "version": 1,
  "profiles": {
    "ci": {
      "requireHoldouts": false,
      "requireBrowserDiff": false,
      "requireDeno": true,
      "requireBun": true,
      "requireBrowserSmoke": false,
      "requireFuzzReport": false,
      "requireStreamReport": true,
      "requireAgentReport": true,
      "requireConformanceReports": true,
      "requirePackReport": true,
      "requireDocsReport": true,
      "requireBudgetsReport": true,
      "requireBenchReport": false,
      "requireBenchStability": false,
      "robustnessUsesFuzz": false,
      "weights": {
        "correctness": 70,
        "browserDiff": 0,
        "performance": 0,
        "robustness": 10,
        "agentFirst": 15,
        "packagingTrust": 5
      }
    },
    "release": {
      "requireHoldouts": true,
      "requireBrowserDiff": true,
      "requireDeno": true,
      "requireBun": true,
      "requireBrowserSmoke": false,
      "requireFuzzReport": true,
      "requireStreamReport": true,
      "requireAgentReport": true,
      "requireConformanceReports": true,
      "requirePackReport": true,
      "requireDocsReport": true,
      "requireBudgetsReport": true,
      "requireBenchReport": true,
      "requireBenchStability": true,
      "benchStabilityRuns": 9,
      "robustnessUsesFuzz": true,
      "weights": {
        "correctness": 40,
        "browserDiff": 20,
        "performance": 15,
        "robustness": 10,
        "agentFirst": 10,
        "packagingTrust": 5
      }
    }
  },
  "thresholds": {
    "conformance": {
      "tokenizer": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "tree": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "encoding": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "serializer": {
        "minPassRate": 1,
        "maxSkips": 0
      },
      "holdout": {
        "minPassRate": 1,
        "maxSkips": 0
      }
    },
    "browserDiff": {
      "minAgreement": 0.999,
      "minEnginesPresent": 3,
      "minCases": 500,
      "minTagCoverage": 10,
      "requiredTags": [
        "tokenizer/entities",
        "adoption-agency",
        "tables/foster-parenting",
        "foreign-content (svg/mathml)",
        "templates",
        "optional-tags",
        "comments/doctype",
        "scripting-flag surface (document.write-like markup patterns as strings only)"
      ]
    },
    "determinism": {
      "requireNode": true,
      "requireDeno": true,
      "requireBun": true,
      "requireCrossRuntime": true
    },
    "budgets": {
      "requireBudgetsReport": true,
      "requireNoHangs": true,
      "requireStructuredBudgetErrors": true,
      "requireFuzzReport": true
    },
    "packaging": {
      "forbiddenPaths": [
        "vendor/",
        "test/",
        "codex-prompts/",
        "scripts/"
      ]
    },
    "performanceStability": {
      "maxThroughputRobustSpreadFraction": 0.2,
      "maxMemoryRobustSpreadFraction": 0.01,
      "minThroughputMedianRatio": 0.9,
      "maxMemoryMedianRatio": 1.1
    }
  },
  "weights": {
    "correctness": 40,
    "browserDiff": 20,
    "performance": 15,
    "robustness": 10,
    "agentFirst": 10,
    "packagingTrust": 5
  },
  "performanceBaseline": {
    "notes": "Calibrated from bench-stability medians using postGcHeapUsed measurements (`node --expose-gc`).",
    "benchmarks": {
      "parse-medium": {
        "mbPerSec": 3.395,
        "memoryMB": 6.938
      },
      "parse-large": {
        "mbPerSec": 3.974,
        "memoryMB": 6.987
      }
    }
  },
  "scoring": {
    "passRateScoreShape": "fromThresholdToPerfect",
    "browserAgreementAggregation": "min",
    "performanceAggregation": "geometricMean"
  }
}
